<!DOCTYPE html>
<html>
  <head>
    <title>Refs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="images/favicon.ico" rel="shortcut icon" />
    <meta charset="UTF-8" />
    <script src="/javascripts/vendor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.2/vue.global.js"></script>
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="bg-lighter">
    <div class="container main my-5">
      <div class="row">
        <main class="col post">
          <!-- ç« ç¯€æ¨™é¡Œ -->
          <div class="mb-4">
            <h1 class="mt-0 text-muted">è¡¨å–®é©—è­‰å¥—ä»¶</h1>
            <small>æª”åï¼š<code>adv-vee-validation.html</code></small>
          </div>
          <!-- ğŸ”¥ğŸ”¥ç·´ç¿’é–‹å§‹ğŸ”¥ğŸ”¥ -->

          <div id="app">
            <h2>å¥—ç”¨ä¸€å€‹ç¾æˆçš„æµç¨‹</h2>
            <p>
              åƒè€ƒæ–‡ä»¶ï¼š<a href="https://hackmd.io/FFv0a5cBToOATP7uI5COMQ"
                >https://hackmd.io/FFv0a5cBToOATP7uI5COMQ</a
              >
            </p>

            <h3>ç¯„ä¾‹ï¼šè¼‰å…¥ VeeValidate é©—è­‰å¥—ä»¶</h3>
            <v-form @submit="onSubmit" v-slot="{errors}">
              <span style="color: red;">{{ errors }}</span>
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <v-field
                  rules="email|required"
                  id="email"
                  name="email"
                  type="email"
                  class="form-control"
                  placeholder="è«‹è¼¸å…¥ Email"
                  :class="{'is-invalid': errors['email']}"
                  v-model="user.email"
                ></v-field>
                <error-message
                  name="email"
                  class="invalid-feedback"
                ></error-message>
              </div>

              <div class="mb-3">
                <label for="name" class="form-label">å§“å</label>
                <input
                  id="name"
                  name="å§“å"
                  type="text"
                  class="form-control"
                  placeholder="è«‹è¼¸å…¥å§“å"
                />
                <span class="invalid-feedback"></span>
              </div>

              <div class="mb-3">
                <label for="phone" class="form-label">é›»è©±</label>
                <v-field
                  id="phone"
                  name="é›»è©±"
                  type="text"
                  class="form-control"
                  placeholder="è«‹è¼¸å…¥é›»è©±"
                  :rules="isPhone"
                ></v-field>
                <span class="invalid-feedback"></span>
              </div>

              <div class="mb-3">
                <label for="region" class="form-label">åœ°å€</label>
                <select id="region" name="åœ°å€" class="form-control">
                  <option value="">è«‹é¸æ“‡åœ°å€</option>
                  <option value="å°åŒ—å¸‚">å°åŒ—å¸‚</option>
                  <option value="é«˜é›„å¸‚">é«˜é›„å¸‚</option>
                </select>
                <span class="invalid-feedback"></span>
              </div>

              <div class="mb-3">
                <label for="address" class="form-label">åœ°å€</label>
                <input
                  id="address"
                  name="åœ°å€"
                  type="text"
                  class="form-control"
                  placeholder="è«‹è¼¸å…¥åœ°å€"
                />
                <span class="invalid-feedback"></span>
              </div>

              <button class="btn btn-primary" type="submit">Submit</button>
            </v-form>
          </div>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/vee-validate/4.3.6/vee-validate.min.js"></script>
          <script src="https://cdn.jsdelivr.net/npm/@vee-validate/rules@4.3.6/dist/vee-validate-rules.min.js"></script>
          <script src="https://cdn.jsdelivr.net/npm/@vee-validate/i18n@4.3.6/dist/vee-validate-i18n.min.js"></script>
          <script type="module">
            // è¼‰å…¥è¦å‰‡
            VeeValidate.defineRule("email", VeeValidateRules["email"]);
            VeeValidate.defineRule("required", VeeValidateRules["required"]);

            // å¤šåœ‹èªç³»
            VeeValidateI18n.loadLocaleFromURL("./zh_TW.json");

            // Activate the locale
            VeeValidate.configure({
              generateMessage: VeeValidateI18n.localize("zh_TW"),
              validateOnInput: true // èª¿æ•´ç‚ºè¼¸å…¥å­—å…ƒç«‹å³é€²è¡Œé©—è­‰
            });

            const app = Vue.createApp({
              data() {
                return {
                  user: {
                    email: "",
                    name: "",
                    address: "",
                    phone: ""
                  }
                };
              },
              methods: {
                onSubmit() {
                  console.log(this.user);
                },
                isPhone(value) {
                  const phoneNumber = /^(09)[0-9]{8}$/;
                  return phoneNumber.test(value) ? true : "éœ€è¦æ­£ç¢ºçš„é›»è©±è™Ÿç¢¼";
                }
              },
              created() {
                console.log(this);
              }
            });

            // è¨»å†Š vee-validate å…ƒä»¶
            app.component("VForm", VeeValidate.Form);
            app.component("VField", VeeValidate.Field);
            app.component("ErrorMessage", VeeValidate.ErrorMessage);

            app.mount("#app");
          </script>

          <!-- ğŸ™‡ğŸ™‡ç·´ç¿’çµæŸğŸ™‡ğŸ™‡ -->
        </main>
      </div>
    </div>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    />
  </body>
</html>
